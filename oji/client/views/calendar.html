<template name="calendar">
    <div class="titlebar">
        <b>{{currentUser.firstname}}'s Agenda</b>
    </div>
    <div class="text-center content container">
    <div class="text-center daySelector row" role="alert">
        <div class="col">
            <a id="prevMonth">&lt;</a>
        </div>
        <div class="col">
        <h3>
           
            {{calendar.selectedMonth}} {{calendar.selectedYear}}
         
        </h3>
        </div>
        <div class="col">
            <a id="nextMonth">&gt;</a>
        </div>
        {{#each calendar.weeks}}
        <div class="row justify-content-center row-cols-7">    
            {{#each this}}
            <div class="col">
                <a class="daySelect event-{{this.event}} today-{{this.today}} viewdate-{{this.viewdate}}" data-date="{{this.unixDate}}">{{this.day}}</a>
            </div>
            {{/each}}
        </div>
        {{/each}}
    </div>
    <div class="text-center daySelector" role="alert">
            {{#if calendar.numberOfEvents}}
            <h3>Agenda for {{calendar.selectedDayFull}}</h3>
            <br>
            <table style="width:100%">
                {{#each calendar.selectedDayEvents}}
                <tr class="event">
                    <td class="eventTime-{{importance}} mx-2">
                        <h3>{{time}}</h3>
                    </td>
                    <td class="eventTitle">
                        <h4 class="mx-2">{{title}}</h4>
                        <h5 class="mx-2">{{importance}} priorty</h5>
                    </td>
                    <td>
                        {{#if this.delete}}
                            <a id="deleteEvent" data-id="{{this._id}}" class="deleteEvent glyphicon glyphicon-remove"></a>
                        {{/if}}
                    </td>
                </tr>
                {{/each}}
            </table>
            {{else}}
            <h3>No events are scheduled for {{calendar.selectedDayFull}}.</h3>
            {{/if}}
            <br>
            <button class="btn btn-primary" id="openCreateEventModal">Create event</button>
        </div>
        {{#each calendar.selectedDayEvents}}
    {{/each}}
        <div class="text-center daySelector" id="createEventModal" style="display:none;" role="alert">
            <div class="cardIcon">
                <a id="closeCreateEventModal"><span class="glyphicon glyphicon-remove"></span></a>
            </div>
            <div class="justify-content-center">
                <h3>
                    Create Event
                </h3>
                <form>
                    <br><input type="text" id="title" style="height: 40px; font-size:large;" placeholder="Title"><br><br>
                    <input type=date id="date" style="width:30%;"> at <input type=time id="time" style="width:30%"><br><br>
                    <select id="type">
                        {{#if isInRole 'supervisor'}}
                        <option>Supervisor Group</option>
                        {{/if}}
                        {{#if isInRole 'admin'}}
                        <option>All Organization</option>
                        {{/if}}
                        <option>Personal</option>
                        {{#each usersList}}
                        <option value="{{this._id}}">{{this.lastname}}, {{this.firstname}}</option>
                        {{/each}}
                    </select><br><br>
                    <select id="importance">
                        <option disabled selected>Select Priority</option>
                        <option>Low</option>
                        <option>Medium</option>
                        <option>Critical</option>
                    </select><br><br>
                    <button class="btn btn-primary" id="createEvent">Create Event</button>
                </form>
            </div>
            </div>
            {{> menu}}
    </div>
</template>