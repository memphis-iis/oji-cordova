<template name="calendar">
    <div class="titlebar">
        <b>{{currentUser.firstname}}'s Agenda</b>
    </div>
    <div class="text-center content container">
    <div class="text-center daySelector" role="alert">
        <div class="flex-row justify-content-center">
            <div class="flex-col">
                <a class="daySelect today-{{calendar.relToday}}" data-date="{{calendar.relToday}}">Today</a>
                {{#each calendar.daysOfWeek}}
                    <a class="daySelect today-{{this.today}}" data-date="{{this.relDay}}">{{this.day}}</a>
                {{/each}}
            </div>
        </div>
    </div>
    <div class="text-center daySelector" role="alert">
            {{#if calendar.numberOfEvents}}
            <h3>Agenda for {{calendar.selectedDayFull}}</h3>
            <br>
            <table style="width:100%">
                {{#each calendar.selectedDayEvents}}
                <tr class="event">
                    <td class="eventTime-{{importance}}">
                        <h2>{{time}}</h2>
                    </td>
                    <td class="eventTitle">
                        <h4>{{title}}</h4>
                        <h5>{{importance}} priorty</h5>
                    </td>
                    <td>
                        {{#if this.delete}}
                            <a id="deleteEvent" data-id="{{this._id}}" class="deleteEvent glyphicon glyphicon-remove"></a>
                        {{/if}}
                    </td>
                </tr>
                {{/each}}
            </table>
            {{else}}
            <h3>No events are scheduled for {{calendar.selectedDayFull}}.</h3>
            {{/if}}
            <br>
            <button class="btn btn-primary" id="openCreateEventModal">Add an event</button>
        </div>
        {{#each calendar.selectedDayEvents}}
    {{/each}}
        <div class="text-center daySelector" id="createEventModal" hidden role="alert">
            <div class="cardIcon">
                <a id="closeCreateEventModal"><span class="glyphicon glyphicon-remove"></span></a>
            </div>
            <div class="justify-content-center">
                <h3>
                    Create Event
                </h3>
                <form>
                    <br><input type="text" id="title" style="height: 40px; font-size:large;" placeholder="Title"><br><br>
                    <input type=date id="date" style="width:30%;"> at <input type=time id="time" style="width:30%"><br><br>
                    <select id="type">
                        {{#if isInRole 'supervisor'}}
                        <option>Supervisor Group</option>
                        {{/if}}
                        {{#if isInRole 'admin'}}
                        <option>All Organization</option>
                        {{/if}}
                        <option>Personal</option>
                        {{#each usersList}}
                        <option value="{{this._id}}">{{this.lastname}}, {{this.firstname}}</option>
                        {{/each}}
                    </select><br><br>
                    Priority:
                    <select id="importance">
                        <option>Low</option>
                        <option>Medium</option>
                        <option>Critical</option>
                    </select><br><br>
                    <button class="btn btn-primary" id="createEvent">Create Event</button>
                </form>
            </div>
            </div>
            {{> menu}}
    </div>
</template>