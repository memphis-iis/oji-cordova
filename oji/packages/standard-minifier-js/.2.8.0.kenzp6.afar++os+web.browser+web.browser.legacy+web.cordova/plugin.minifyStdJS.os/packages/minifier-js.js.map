{"version":3,"sources":["meteor://ðŸ’»app/packages/minifier-js/minifier.js"],"names":["module","export","meteorJsMinify","terser","terserMinify","source","options","callback","Npm","require","result","minify","e","NODE_ENV","process","env","compress","drop_debugger","unused","dead_code","typeofs","global_defs","safari10","terserJsMinify","Meteor","wrapAsync","terserResult","code","minifier"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAAA,MAAM,CAACC,MAAP,CAAc;AAACC,gBAAc,EAAC,MAAIA;AAApB,CAAd;AAAA,IAAIC,MAAJ;;AAEA,MAAMC,YAAY,GAAG,CAAOC,MAAP,EAAeC,OAAf,EAAwBC,QAAxB,8BAAqC;AACxDJ,QAAM,GAAGA,MAAM,IAAIK,GAAG,CAACC,OAAJ,CAAY,QAAZ,CAAnB;;AACA,MAAI;AACF,UAAMC,MAAM,iBAASP,MAAM,CAACQ,MAAP,CAAcN,MAAd,EAAsBC,OAAtB,CAAT,CAAZ;AACAC,YAAQ,CAAC,IAAD,EAAOG,MAAP,CAAR;AACA,WAAOA,MAAP;AACD,GAJD,CAIE,OAAOE,CAAP,EAAU;AACVL,YAAQ,CAACK,CAAD,CAAR;AACA,WAAOA,CAAP;AACD;AACF,CAVoB,CAArB;;AAYO,MAAMV,cAAc,GAAG,UAAUG,MAAV,EAAkB;AAC9C,QAAMK,MAAM,GAAG,EAAf;AACA,QAAMG,QAAQ,GAAGC,OAAO,CAACC,GAAR,CAAYF,QAAZ,IAAwB,aAAzC;AAGA,QAAMP,OAAO,GAAG;AACdU,YAAQ,EAAE;AACRC,mBAAa,EAAE,KADP;AACe;AACvBC,YAAM,EAAE,KAFA;AAEe;AACvBC,eAAS,EAAE,IAHH;AAGe;AACvBC,aAAO,EAAE,KAJD;AAIe;AACvBC,iBAAW,EAAE;AACX,gCAAwBR;AADb;AALL,KADI;AAUd;AACA;AACA;AACAS,YAAQ,EAAE,IAbI,CAaW;;AAbX,GAAhB;AAgBA,QAAMC,cAAc,GAAGC,MAAM,CAACC,SAAP,CAAiBrB,YAAjB,CAAvB;AACA,MAAIsB,YAAJ;;AACA,MAAI;AACFA,gBAAY,GAAGH,cAAc,CAAClB,MAAD,EAASC,OAAT,CAA7B;AACD,GAFD,CAEE,OAAOM,CAAP,EAAU;AACV,UAAMA,CAAN;AACD,GA3B6C,CA6B9C;;;AACAF,QAAM,CAACiB,IAAP,GAAcD,YAAY,CAACC,IAA3B;AACAjB,QAAM,CAACkB,QAAP,GAAkB,QAAlB;AAEA,SAAOlB,MAAP;AACD,CAlCM,C","file":"/packages/minifier-js.js","sourcesContent":["let terser;\n\nconst terserMinify = async (source, options, callback) => {\n  terser = terser || Npm.require(\"terser\");\n  try {\n    const result = await terser.minify(source, options);\n    callback(null, result);\n    return result;\n  } catch (e) {\n    callback(e);\n    return e;\n  }\n};\n\nexport const meteorJsMinify = function (source) {\n  const result = {};\n  const NODE_ENV = process.env.NODE_ENV || \"development\";\n\n\n  const options = {\n    compress: {\n      drop_debugger: false,  // remove debugger; statements\n      unused: false,         // drop unreferenced functions and variables\n      dead_code: true,       // remove unreachable code\n      typeofs: false,        // set to false due to known issues in IE10\n      global_defs: {\n        \"process.env.NODE_ENV\": NODE_ENV\n      }\n    },\n    // Fix issue #9866, as explained in this comment:\n    // https://github.com/mishoo/UglifyJS2/issues/1753#issuecomment-324814782\n    // And fix terser issue #117: https://github.com/terser-js/terser/issues/117\n    safari10: true,          // set this option to true to work around the Safari 10/11 await bug\n  };\n\n  const terserJsMinify = Meteor.wrapAsync(terserMinify);\n  let terserResult;\n  try {\n    terserResult = terserJsMinify(source, options);\n  } catch (e) {\n    throw e;\n  }\n\n  // this is kept to maintain backwards compatability\n  result.code = terserResult.code;\n  result.minifier = 'terser';\n\n  return result;\n};\n"]}